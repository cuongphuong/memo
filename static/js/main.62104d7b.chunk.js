(this.webpackJsonpmemo=this.webpackJsonpmemo||[]).push([[0],{126:function(e,t,n){},130:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},157:function(e,t,n){},159:function(e,t,n){},160:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(24),i=n.n(c),o=n(43),u=(n(126),n(13)),s=n(16),l=(n(130),n(23)),p=n(27),d=n(1),h=function(e){var t=e.children;return Object(d.jsx)("div",{className:"pg_mm_grid-container",children:t})},f=function(e){var t=e.children,n=Object(s.c)((function(e){return e.style}));return Object(d.jsx)("div",{className:"pg_mm_header",id:"pg_mm_header-menu",children:Object(d.jsx)("ul",{style:n.headerMenu,children:t})})};function m(e){return"Write"===e?Object(d.jsx)(l.a,{icon:p.d}):"List"===e?Object(d.jsx)(l.a,{icon:p.h}):"Search"===e?Object(d.jsx)(l.a,{icon:p.f}):void 0}f.Item=function(e){var t=e.onClick,n=e.title,r=e.selected,a=Object(s.c)((function(e){return e.style}));return"Settings"===n?Object(d.jsx)("p",{onClick:function(){return t(n)},className:"pg_mm_settings_menu_item unselectable",children:Object(d.jsx)(l.a,{icon:p.e})}):"Icon"===n?Object(d.jsx)("p",{onClick:function(){return t(n)},className:"pg_mm_settings_menu_item unselectable",children:Object(d.jsx)("img",{alt:"github",width:40,style:{marginTop:5,marginRight:10},src:"https://raw.githubusercontent.com/cuongphuong/memo/master/public/icon/github-logo.png"})}):Object(d.jsx)("li",{children:Object(d.jsx)("span",{className:"unselectable",style:r===n?a.menuSelected:{},onClick:function(){return t(n)},children:m(n)})})};h.Header=f,h.SiderBar=function(e){var t=e.children,n=Object(s.c)((function(e){return e.style}));return Object(d.jsx)("div",{style:n.leftBackground,className:"pg_mm_left pg_mm_scroll",children:t})},h.RightContent=function(e){var t=e.children;return Object(d.jsx)("div",{className:"pg_mm_right pg_mm_scroll",children:t})},h.MiddleContent=function(e){var t=e.children;return Object(d.jsx)("div",{className:"pg_mm_mid pg_mm_scroll",children:t})},h.FullContent=function(e){var t=e.children;return Object(d.jsx)("div",{className:"pg_mm_content_full",children:t})},h.Fooder=function(){};var b=h,g=n(4),j=n.n(g),O=n(10),v=n(17),x=n(5),y=function(){var e=null,t=1e4,n={};function r(e){if(!e)return{};var t={headers:n,method:e.method};return e.signal&&(t=Object(x.a)(Object(x.a)({},t),{},{signal:e.signal})),e.data&&(t=Object(x.a)(Object(x.a)({},t),{},{body:e.data})),t}function a(e,t){return c.apply(this,arguments)}function c(){return(c=Object(O.a)(j.a.mark((function e(n,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,r,t).then((function(e){if(!e.ok)throw new Error(e.status);var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")?e.json():e.text()})).catch((function(e){throw new Error(e)}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(O.a)(j.a.mark((function t(n){var c,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=(c=e+n.url.replaceAll("//","/")).trim(),c=encodeURI(c),i=r(n),t.next=6,a(c,i);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{add_config:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{base_url:"",timeout:1e4,in_headers:{}};e=r.base_url,t=r.timeout,n=r.in_headers},exe:function(e){return i.apply(this,arguments)}}}(),_=n(19),k=n(25),w=n(39),C=function(){function e(){Object(_.a)(this,e)}return Object(k.a)(e,null,[{key:"isNullOrEmpty",value:function(t){return!t||null===t||t===e.EMPTY}},{key:"base64Encode",value:function(e){return e&&null!==e?w.a.encode(e):null}},{key:"base64decode",value:function(e){return e&&null!==e?w.a.decode(e):null}},{key:"trimL",value:function(e,t){var n=e;for(n&&null!==n||(n="");n.startsWith(" ")||n.startsWith("\u3000")||n.startsWith("\t")||n.startsWith("\n");)n=n.substring(1);return""===n&&(n=t),n}},{key:"trimR",value:function(e,t){var n=e;for(n&&null!==n||(n="");n.endsWith(" ")||n.endsWith("\u3000")||n.endsWith("\t");)n=n.substring(0,n.length()-1);return""===n&&(n=t),n}},{key:"trim",value:function(t,n){var r=t;return r=e.trimL(r,n)}},{key:"nonAccentVietnamese",value:function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5/g,"a")).replace(/\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5/g,"e")).replace(/\xec|\xed|\u1ecb|\u1ec9|\u0129/g,"i")).replace(/\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1/g,"o")).replace(/\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef/g,"u")).replace(/\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9/g,"y")).replace(/\u0111/g,"d")).replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"")).replace(/\u02C6|\u0306|\u031B/g,"")).replace(/\s/g,"-")}},{key:"truncateString",value:function(e,t){return e.length>t?e.slice(0,t)+"...":e}}]),e}();C.EMPTY="";var N=n(7),E=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(_.a)(this,e),this.key=t,this.expire=n,this.items=this.getAll()}return Object(k.a)(e,[{key:"add",value:function(e,t){e&&(this.items=Object(x.a)(Object(x.a)({},this.items),{},Object(N.a)({},e,t))),this.store()}},{key:"del",value:function(e){e&&delete this.items[e],this.store()}},{key:"has",value:function(e){return this.items.hasOwnProperty(e)}},{key:"store",value:function(){localStorage.setItem(this.key,JSON.stringify(this.items)),localStorage.setItem(this.key+":ts",(new Date).getTime())}},{key:"get",value:function(e){return this.getAll()[e]}},{key:"getAll",value:function(){var e=localStorage.getItem(this.key);return this.isExpired()||!e?{}:JSON.parse(e)}},{key:"isExpired",value:function(){var e=localStorage.getItem(this.key+":ts"),t=(new Date).getTime()-e;return!!(this.expire&&t>this.expire)&&(this.clear(),!0)}},{key:"clear",value:function(){localStorage.removeItem(this.key),localStorage.removeItem(this.key+":ts")}}]),e}(),T={};function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return T.hasOwnProperty(e)||(T[e]=new E(e,t)),T[e]}var A=S("pg_mm_settings"),R=function(){function e(){return A.has("cacheTime")?A.get("cacheTime"):12e5}return{getCacheTime:e,setCacheTimeMinute:function(e){A.add("cacheTime",6e4*e)},getUrlRepository:function(){return A.has("urlRepository")?A.get("urlRepository"):"https://github.com/cuongphuong/memo_data"},getRequestTimeout:function(){return A.has("requestTimeout")?A.get("requestTimeout"):5e3},setUrlRepository:function(e){A.add("urlRepository",e)},setRequestTimeout:function(e){A.add("requestTimeout",e)},getAccessKey:function(){return A.has("accessKey")?A.get("accessKey"):null},setAccessKey:function(e){A.add("accessKey",e)},getUserName:function(){return A.has("userName")?A.get("userName"):null},setUserName:function(e){A.add("userName",e)},getEmail:function(){return A.has("email")?A.get("email"):null},setEmail:function(e){A.add("email",e)},getCacheMinutes:function(){var t=e();return t?(t/6e4).toFixed():0},setTheme:function(e){A.add("theme",e)},getTheme:function(){return A.has("theme")?A.get("theme"):"tomato"},setAvatarUrl:function(e){A.add("avatar",e)},getAvatarUrl:function(){return A.has("avatar")?A.get("avatar"):null},releaseCache:function(){A.clear()}}}(),L=R.getUrlRepository().replaceAll("https://github.com/",""),I=R.getRequestTimeout(),U=R.getAccessKey(),P=R.getUserName(),M=R.getEmail(),D={base_url:"https://api.github.com",timeout:I,in_headers:{Accept:"application/vnd.github.v3+json"}};U&&!C.isNullOrEmpty(U)&&(D=Object(x.a)(Object(x.a)({},D),{},{in_headers:Object(x.a)(Object(x.a)({},D.in_headers),{},{Authorization:"Token "+U})})),y.add_config(D);var F={name:P,email:M};function K(e,t){return H.apply(this,arguments)}function H(){return(H=Object(O.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.exe({url:"/search/code?q=".concat(t,"+repo:").concat(L),method:"GET",signal:n}).catch((function(e){return console.log(e),[]}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return B.apply(this,arguments)}function B(){return(B=Object(O.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.exe({url:"/repos/".concat(L,"/contents/").concat(t),method:"GET",signal:n}).catch((function(e){throw e}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return V.apply(this,arguments)}function V(){return(V=Object(O.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?"/users/"+t:"/user",e.next=3,y.exe({url:n,method:"GET"}).catch((function(e){return null}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:"Add file",content:"KEVtcHR5KQ=="},t=arguments.length>1?arguments[1]:void 0;return y.exe({url:"/repos/".concat(L,"/contents/").concat(t),method:"PUT",data:JSON.stringify(e)})}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:"Update content",content:"KEVtcHR5KQ==",sha:""},t=arguments.length>1?arguments[1]:void 0;return y.exe({url:"/repos/".concat(L,"/contents/").concat(t),method:"PUT",data:JSON.stringify(e)})}function q(){return z.apply(this,arguments)}function z(){return z=Object(O.a)(j.a.mark((function e(){var t,n,r=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"heads/main",e.next=3,y.exe({url:"/repos/".concat(L,"/git/refs/").concat(t),method:"GET"});case 3:return n=e.sent,e.abrupt("return",n.object.sha);case 5:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}function Q(){return Z.apply(this,arguments)}function Z(){return Z=Object(O.a)(j.a.mark((function e(){var t,n,r=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,y.exe({url:"/repos/".concat(L,"/git/trees/").concat(t),method:"GET"});case 3:return n=e.sent,e.abrupt("return",n.tree);case 5:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function $(e,t){return X.apply(this,arguments)}function X(){return(X=Object(O.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r={tree:t},n&&(r=Object(x.a)(Object(x.a)({},r),{},{base_tree:n})),e.next=6,y.exe({url:"/repos/".concat(L,"/git/trees"),method:"POST",data:JSON.stringify(r)});case 6:return a=e.sent,e.abrupt("return",a.sha);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t,n){return te.apply(this,arguments)}function te(){return(te=Object(O.a)(j.a.mark((function e(t,n,r){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(F.name)){e.next=3;break}return e.abrupt("return");case 3:return a={message:r,author:F,parents:[t],tree:n},e.next=6,y.exe({url:"/repos/".concat(L,"/git/commits"),method:"POST",data:JSON.stringify(a)}).catch((function(e){return null}));case 6:return c=e.sent,e.abrupt("return",c.sha);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(O.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.exe({url:"/repos/".concat(L,"/git/refs/heads/")+t,method:"PATCH",data:JSON.stringify({sha:n})}).catch((function(e){return null}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:"Add file",content:"KEVtcHR5KQ=="},t=arguments.length>1?arguments[1]:void 0;return Y(e,t)}function ce(){return ie.apply(this,arguments)}function ie(){return ie=Object(O.a)(j.a.mark((function e(){var t,n,r,a,c=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{message:"Add file",content:"KEVtcHR5KQ=="},n=c.length>1?c[1]:void 0,e.next=4,W(n);case 4:if(null!==(r=e.sent)){e.next=7;break}return e.abrupt("return");case 7:return a=r.sha,t.sha=a,e.abrupt("return",J(t,n));case 10:case"end":return e.stop()}}),e)}))),ie.apply(this,arguments)}function oe(e){return ue("main",e)}function ue(){return se.apply(this,arguments)}function se(){return se=Object(O.a)(j.a.mark((function e(){var t,n,r,a,c,i,o,u,s,l=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:"main",n=l.length>1?l[1]:void 0,r=l.length>2?l[2]:void 0,e.next=5,q("heads/main");case 5:return a=e.sent,e.next=8,Q(a+"?recursive=true");case 8:return(c=e.sent).forEach((function(e){r&&!C.isNullOrEmpty(r)||e.path!==n?e.path===n&&(e.path=r):e.isDeleted=!0,"tree"===e.type&&(e.isDeleted=!0)})),c=c.filter((function(e){return!e.isDeleted})),e.next=13,$(c);case 13:return i=e.sent,o=!r||C.isNullOrEmpty(r)?"Remove "+n:"Move "+n+" to "+r,e.next=17,ee(a,i,o);case 17:return u=e.sent,e.next=20,ne(t,u);case 20:return s=e.sent,e.abrupt("return",null!=s);case 22:case"end":return e.stop()}}),e)}))),se.apply(this,arguments)}n(138),n(139);var le=n(235),pe=n(119),de=n(236);function he(e){var t=a.a.useState("Just a link: https://reactjs.com."),n=Object(u.a)(t,2),r=n[0],c=n[1],i=e.source,o=R.getAccessKey();function s(){return(s=Object(O.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==!window.confirm("Do you want to delete "+e.source.filePath)){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,oe(e.source.filePath);case 5:v.NotificationManager.info("Deleted."),e.onDelete(!0),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.onDelete(!1);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}function l(){return(l=Object(O.a)(j.a.mark((function e(){var t,n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.protocol+"//"+window.location.host,n=(n=i.filePath.replaceAll("/","+")).substr(0,n.length-3),n=encodeURI(n),r=t+"/memo/#/get/"+n,e.next=7,navigator.clipboard.writeText(r);case 7:v.NotificationManager.info("Copied: "+r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.useEffect((function(){c(i.content)}),[e.isPopupView,i.content]),Object(d.jsxs)("section",{className:"section sec-html visible markdown-section pg_mm_container_view",children:[Object(d.jsx)("div",{className:"pg_mm_button_group",children:Object(d.jsxs)("div",{className:"pg_mm_button_group_main",style:{height:"100%",position:"relative"},children:[(o&&o.length)>0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("span",{onClick:function(){return s.apply(this,arguments)},className:"pg_mm_view_del_button"}),Object(d.jsx)("span",{onClick:function(){e.onEdit(e.source.filePath)},className:"pg_mm_view_edit_button"})]}):"",Object(d.jsx)("span",{onClick:function(){e.onClose()},className:"pg_mm_view_cls_button"})]})}),Object(d.jsx)("div",{className:"section-container html-wrap",children:Object(d.jsxs)("div",{className:"custom-html-style",children:[Object(d.jsxs)("h2",{className:"pg_mm_title",children:[i.title,Object(d.jsx)("img",{onClick:function(){return l.apply(this,arguments)},style:{marginLeft:10,cursor:"pointer"},src:"/memo/icon/copy.png",width:20,alt:"copy"})]}),i.title?Object(d.jsx)("hr",{style:{margin:"10px 0"}}):"",Object(d.jsx)("div",{className:"pg_mm_view_content",children:Object(d.jsx)(le.a,{children:r,remarkPlugins:[pe.a],rehypePlugins:[de.a]})})]})})]})}n(157);function fe(e){var t=a.a.useState(null),n=Object(u.a)(t,2),r=n[0],c=n[1];function i(){return(i=Object(O.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n||e.onDelete(n);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return a.a.useEffect((function(){return c({display:e.display}),function(){}}),[e.display]),Object(d.jsx)("div",{style:r,className:"pg_mm_view_popup",children:e.source?Object(d.jsx)(he,{isPopupView:!0,source:e.source,onDelete:function(e){return i.apply(this,arguments)},onClose:function(){e.onClose()},onEdit:function(t){e.onEdit(t)}}):r&&!r.animationName?Object(d.jsx)("img",{style:{textAlign:"center"},className:"pg_mm_loadding",height:"50px",src:"https://raw.githubusercontent.com/cuongphuong/memo/master/public/icon/blue_loading.gif",alt:"loadding..."}):""})}var me=n(9),be=function(){function e(){Object(_.a)(this,e)}return Object(k.a)(e,null,[{key:"search",value:function(){var t=Object(O.a)(j.a.mark((function t(n,r){var a,c,i,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!C.isNullOrEmpty(n)){t.next=3;break}return console.log("Search keyword is empty"),t.abrupt("return");case 3:return t.prev=3,t.next=6,K(n,r);case 6:if(a=t.sent,a.total_count){t.next=12;break}return console.log("No file mapping result key [".concat(n,"]")),v.NotificationManager.info("No file mapping result key [".concat(n,"]")),t.abrupt("return");case 12:t.next=19;break;case 14:return t.prev=14,t.t0=t.catch(3),v.NotificationManager.console.warning("Not response data from API."),console.error("Not response data from API."),t.abrupt("return");case 19:return c=a.items,i=new Set,o=[],t.next=24,Promise.all(c.map(function(){var t=Object(O.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.has(n.path)){t.next=2;break}return t.abrupt("return");case 2:return i.add(n.path),t.next=5,e.makeContentObject(n.path);case 5:null!==(r=t.sent)&&(o=[].concat(Object(me.a)(o),[r]));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 24:return t.abrupt("return",o);case 25:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"makeContentObject",value:function(){var t=Object(O.a)(j.a.mark((function t(n,r){var a,c,i,o,u,s,l,p,d;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return n=n.trim(),t.next=5,W(n,r);case 5:if(a=t.sent,c={},!a||C.isNullOrEmpty(a.content)){t.next=23;break}if(i=a.content,o=w.a.decode(i),-1!==(u=o.indexOf(e.DEFAULT_DELIMITER,1))){t.next=14;break}return console.log("Content file ".concat(n," is invalid.")),t.abrupt("return",null);case 14:return s=o.substring(0,u+e.DEFAULT_DELIMITER.length),l=o.substring(u+e.DEFAULT_DELIMITER.length),p=e.makeConfigFromResult(s),d=C.trim(l),c=Object(x.a)(Object(x.a)({},p),{},{content:d}),c=Object(x.a)(Object(x.a)({},c),{},{filePath:n}),t.abrupt("return",c);case 23:console.log("Can't load data for "+n);case 24:return t.abrupt("return",null);case 25:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"makeConfigFromResult",value:function(e){for(var t,n=/^[a-zA-Z]+:(.*)$/gm,r={};null!==(t=n.exec(e));){t.index===n.lastIndex&&n.lastIndex++;var a=t[0].split(":"),c=C.trim(a[0]),i=C.trim(a[1]);r=Object(x.a)(Object(x.a)({},r),{},Object(N.a)({},c,i))}return r}},{key:"getAllCategoryList",value:function(){var e=Object(O.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,n);case 2:if((r=e.sent)&&Array.isArray(r)&&0!==r.length){e.next=5;break}return e.abrupt("return",[]);case 5:return a=[],r.forEach((function(e){"dir"!==e.type||C.isNullOrEmpty(e.name)||(a=[].concat(Object(me.a)(a),[e.name]))})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAllItemFromPath",value:function(){var e=Object(O.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t);case 2:if((n=e.sent)&&Array.isArray(n)&&0!==n.length){e.next=5;break}return e.abrupt("return",[]);case 5:return r={itemList:[]},n.forEach((function(e){"dir"!==e.type||C.isNullOrEmpty(e.name)||(r=Object(x.a)(Object(x.a)({},r),{},Object(N.a)({},e.name,{hasContnent:!1}))),"file"!==e.type||C.isNullOrEmpty(e.name)||(r=Object(x.a)(Object(x.a)({},r),{},{itemList:[].concat(Object(me.a)(r.itemList),[{name:e.name,path:e.path}])}))})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();be.DEFAULT_DELIMITER="---";var ge=n(158);function je(e){var t=e.children;return Object(d.jsx)("div",{className:"pg_mm_list",children:t})}je.Item=function(e){var t=e.source,n=void 0===t?{title:"n/a",content:"n/a",id:"n/a",category:"n/a"}:t,r=e.handleChooseItem,a=e.activeId;return Object(d.jsxs)("div",{style:{padding:10,margin:5},className:a===n.id?"pg_mm_list_item pg_mm_list_item_active":"pg_mm_list_item",onClick:function(){r(n)},children:[Object(d.jsx)("h3",{style:{color:"hsl(210,8%,25%)",fontSize:17},className:"pg_mm_trunc",children:n.title}),Object(d.jsx)("p",{className:"pg_mm_trunc",style:{fontSize:16,lineHeight:1.5},children:ge(n.content).replace(/(?:\r\n|\r|\n)/g," ")})]})};var Oe=je,ve=function(e){return{type:"SearchReducer/setActiveId",payload:e}},xe=function(e){return{type:"SearchReducer/setMdContent",payload:e}},ye=function(e){return{type:"SearchReducer/setSearchResultList",payload:e}},_e=S("pg_mm_search",null),ke={getTopKeyWord:function(){var e=_e.getAll();return Object.keys(e).sort((function(t,n){return e[n]-e[t]}))},insertKey:function(e){var t=_e.getAll();if(Object.keys(t).length>=10&&function(e){var t=Object.keys(e).sort((function(t,n){return e[t]-e[n]}));console.log(t[0]),_e.del(t[0])}(t),_e.has(e)){var n=_e.get(e);_e.add(e,++n)}else _e.add(e,1)}},we=n(12);n(159);function Ce(e){var t=a.a.useRef(null),n=Object(s.b)(),c=Object(s.c)((function(e){return e.searchData.searchResultList})),i=Object(s.c)((function(e){return e.searchData.activeId})),o=Object(r.useState)(!1),l=Object(u.a)(o,2),p=l[0],h=l[1],f=Object(r.useState)(""),m=Object(u.a)(f,2),g=m[0],v=m[1],x=Object(r.useState)([]),y=Object(u.a)(x,2),_=y[0],k=y[1],w=a.a.useState("none"),N=Object(u.a)(w,2),E=N[0],T=N[1],S=a.a.useState(null),A=Object(u.a)(S,2),R=A[0],L=A[1],I=Object(r.useRef)(null),U=Object(r.useRef)(null),P=Object(we.g)().id,M=Object(r.useCallback)((function(e){var t;n(ve(e.id)),n(xe(e)),t=e.filePath,T("block"),be.makeContentObject(t).then((function(e){L(e)}))}),[n]);function D(e){v(e.target.value),clearTimeout(U.current),t.current=new AbortController;var r=t.current.signal;U.current=setTimeout((function(){r.aborted||(n(ye([])),function(e){F.apply(this,arguments)}(e.target.value))}),600)}function F(){return(F=Object(O.a)(j.a.mark((function e(r){var a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current=new AbortController,a=t.current.signal,h(!0),e.next=5,be.search(r,a);case 5:(c=e.sent)&&c.length>0&&(ke.insertKey(r),n(ye(c))),h(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){function e(){return(e=Object(O.a)(j.a.mark((function e(){var r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C.isNullOrEmpty(P)){e.next=3;break}return I.current.focus(),e.abrupt("return");case 3:return h(!0),(r=(r=P).replaceAll("+","/")).endsWith(".md")||(r+=".md"),a=null,e.prev=8,t.current=new AbortController,c=t.current.signal,e.next=13,be.makeContentObject(r,c);case 13:a=e.sent,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(8),console.log(e.t0),h(!1);case 20:if(a){e.next=22;break}return e.abrupt("return");case 22:h(!1),M(a),n(ye([].concat([],[a]))),n(ve(a.id)),n(xe(a));case 28:case"end":return e.stop()}}),e,null,[[8,16]])})))).apply(this,arguments)}t.current=new AbortController;var r=ke.getTopKeyWord();return k(r),function(){e.apply(this,arguments)}(),function(){T("none"),window.history.replaceState("","","/memo"),t.current.abort()}}),[n,P,M]),Object(d.jsx)("div",{className:"pg_mm_amination",style:{backgroundColor:"#fff"},children:Object(d.jsxs)(b.MiddleContent,{children:[Object(d.jsxs)("div",{style:{maxWidth:900,margin:"0 auto",padding:"10px 5px",backgroundColor:"rgba(246, 246, 246, 1)",minHeight:"calc(100vh - 80px)"},children:[Object(d.jsxs)("div",{className:"pg_mm_input-wrapper",children:[Object(d.jsx)("input",{ref:I,onChange:function(e){D(e)},placeholder:"Search something...",value:g,spellCheck:!1}),Object(d.jsx)("span",{className:"pg_mm_input-highlight",children:g.replace(/ /g,"\xa0")})]}),Object(d.jsx)("datalist",{id:"cacheList",children:_.map((function(e,t){return Object(d.jsx)("option",{value:e},t)}))}),Object(d.jsx)("div",{style:{marginTop:"5px"}}),Object(d.jsx)(d.Fragment,{children:p?Object(d.jsx)("div",{className:"pg_mm_search_loadding",style:{textAlign:"center"},children:Object(d.jsx)("img",{height:"100px",src:"/memo/icon/blue_loading.gif",alt:"loadding..."})}):c.length>0?Object(d.jsx)(Oe,{children:c.map((function(e,t){return Object(d.jsx)(Oe.Item,{activeId:i,handleChooseItem:M,source:e},t)}))}):""})]}),Object(d.jsx)("div",{className:"pg_mm_view_popup_block",children:Object(d.jsx)(fe,{onDelete:function(t){return t?T("none"):e.onFailed("Settings")},onEdit:function(t){return e.onEdit(t)},onClose:function(){setTimeout((function(){T("none")}),100),L(null)},source:R,display:E})})]})})}var Ne=a.a.memo(Ce),Ee=(n(160),S("pg_mm_category_cache",R.getCacheTime()));console.log("Category Cache Time: ",R.getCacheTime());var Te=function(){function e(e){e&&(e=e.filter((function(e){return!e.path.startsWith("Images/")&&"Images"!==e.path}))),Ee.add("tree",e)}return{isCached:function(){var e=Ee.get("tree");return e&&e.length>0},setOrUpdateCache:e,getMainCategory:function(){var e=Ee.get("tree");return e?e.filter((function(e){return!(t=e).path.includes("/")&&"tree"===t.type;var t})).map((function(e){return e.path})):[]},getElementByPath:function(e){var t=Ee.get("tree");if(!t)return[];var n=t.filter((function(t){return function(e,t){var n=e.path;if(!n.startsWith(t))return!1;(n=n.replace(t,"")).startsWith("/")&&(n=n.substring(1,n.length));if(C.isNullOrEmpty(n)||n.includes("/"))return!1;return!0}(t,e)}));return function(e){var t=[];return e.forEach((function(e){var n=e.path.split("/"),r={name:n[n.length-1],path:e.path,type:"tree"===e.type?"dir":"file"};t=[].concat(Object(me.a)(t),[r])})),t=t.sort((function(e,t){return e.type.length-t.type.length}))}(n)},updateDataIntoPath:function(t,n){var r=t+"/",a=Ee.get("tree");a||(a=[]);var c=a.filter((function(e){return!e.path.startsWith(r)}));n.forEach((function(e){c.push({mode:"",path:e.path,sha:"",type:"dir"===e.type?"tree":"blob",url:""})})),e(c)}}}();function Se(e){var t=e.children;return Object(d.jsx)("div",{className:"pg_mm_category_list_main",children:Object(d.jsx)("div",{className:"section",id:"J1",children:t})})}function Ae(e){var t=e.source,n=void 0===t?{name:"",path:"",type:""}:t,r=e.handleItemClick,c=a.a.useRef(null),i=a.a.useState([]),o=Object(u.a)(i,2),s=o[0],l=o[1],p=a.a.useState(n.path),h=Object(u.a)(p,2),f=h[0],m=h[1],b=a.a.useState(!0),g=Object(u.a)(b,2),j=g[0],O=g[1],v=a.a.useRef([n.path]);function y(e){c.current=new AbortController;var t=c.current.signal;O(!0),be.getAllItemFromPath(e).then((function(n){if(!t.aborted){console.log("updated");var r=function(e,t){var n=[];for(var r in e)"object"===typeof e[r]&&"itemList"!==r&&(n=[].concat(Object(me.a)(n),[{name:r,path:"".concat(t,"/").concat(r),type:"dir"}]));e.itemList&&e.itemList.forEach((function(e){e=Object(x.a)(Object(x.a)({},e),{},{type:"file"}),n=[].concat(Object(me.a)(n),[e])}));return n}(n,e);m(e),l(r),O(!1),Te.updateDataIntoPath(e,r)}})).catch((function(e){console.log("Fail to fetch data.",e),t.aborted||(l([]),O(!1))}))}function _(e){var t=v.current.indexOf(e),n=v.current.filter((function(e){return v.current.indexOf(e)<=t}));v.current=n,O(!0);var r=Te.getElementByPath(e);e!==f&&0!==r.length?(l(r),m(e),O(!1)):y(e)}return a.a.useEffect((function(){c.current=new AbortController;var e=Te.getElementByPath(n.path);return l(e),O(!1),function(){c.current.abort()}}),[n.path]),Object(d.jsxs)("div",{className:"link-list",children:[Object(d.jsx)("div",{className:"link-hd",onClick:function(){return _(v.current[v.current.length-1])},children:function(){var e=v.current.map((function(e){return e.split("/").pop()}));return Object(d.jsx)(d.Fragment,{children:e.map((function(e,t){return Object(d.jsx)("span",{className:"pg_mm_path_item",onClick:function(){return _(v.current[t])},children:e},t)}))})}()}),Object(d.jsx)("div",{className:"link-bd",children:j?Object(d.jsx)("img",{height:"20px",src:"https://raw.githubusercontent.com/cuongphuong/memo/master/public/icon/blue_loading.gif",alt:"loadding..."}):s.map((function(e,t){return Object(d.jsx)(Re,{name:e.name,type:e.type,path:e.path,handleItemClick:r,onClickSubFolder:function(e){return function(e){v.current=[].concat(Object(me.a)(v.current),[f+"/"+e]),_(f+"/"+e)}(e)}},t)}))})]})}function Re(e){if("file"===e.type){var t=e.name.replace(".md","");return Object(d.jsx)("p",{onClick:function(){return e.handleItemClick(e.path)},title:t,children:t})}if("dir"===e.type)return Object(d.jsx)("span",{className:"pg_mm_folder_display",onClick:function(){return e.onClickSubFolder(e.name)},title:"",children:e.name})}Se.Block=function(e){var t=a.a.useState([]),n=Object(u.a)(t,2),r=n[0],c=n[1];return a.a.useEffect((function(){var t=Te.getElementByPath(e.name);return c(t),function(){}}),[e.name]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"section-inner",children:[Object(d.jsx)("h3",{className:"hd",children:e.name}),function(){var t=r.filter((function(e){return"dir"===e.type})),n=r.filter((function(e){return"file"===e.type}));return Object(d.jsxs)(d.Fragment,{children:[t.map((function(t,n){return Object(d.jsx)(Ae,{handleItemClick:e.handleItemClick,source:t},n)})),n.length>0?Object(d.jsx)("dl",{className:"link-list",children:n.map((function(t,n){return Object(d.jsx)(Re,{name:t.name,type:t.type,path:t.path,handleItemClick:e.handleItemClick},n)}))}):""]})}()]}),Object(d.jsx)("div",{className:"clear_float"})]})};var Le=Se,Ie=function(e){return{type:"SET_CATEGORY_LIST",payload:e}};function Ue(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.listTabData.categoryList})),r=a.a.useState("none"),c=Object(u.a)(r,2),i=c[0],o=c[1],l=a.a.useState(null),p=Object(u.a)(l,2),h=p[0],f=p[1],m=a.a.useState(!1),g=Object(u.a)(m,2),v=g[0],x=g[1];function y(){return y=Object(O.a)(j.a.mark((function t(){var n,r,a,c=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:function(){},t.prev=1,t.next=4,q("heads/main");case 4:return r=t.sent,t.next=7,Q(r+"?recursive=true");case 7:a=t.sent,n(a),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.onFailed("Settings");case 14:case 15:case"end":return t.stop()}}),t,null,[[1,11]])}))),y.apply(this,arguments)}function _(e){o("block"),be.makeContentObject(e).then((function(e){f(e)}))}return a.a.useEffect((function(){function n(){return n=Object(O.a)(j.a.mark((function t(){var n,r,a,c=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:function(){},t.prev=1,t.next=4,q("heads/main");case 4:return r=t.sent,t.next=7,Q(r+"?recursive=true");case 7:a=t.sent,n(a),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.onFailed("Settings");case 14:case 15:case"end":return t.stop()}}),t,null,[[1,11]])}))),n.apply(this,arguments)}Te.isCached()||(x(!0),function(){n.apply(this,arguments)}((function(e){Te.setOrUpdateCache(e),t(Ie(Te.getMainCategory())),x(!1)})));var r=Te.getMainCategory();return t(Ie(r)),function(){f(null)}}),[t,e]),Object(d.jsxs)("div",{className:"pg_mm_amination",children:[function(){if(v)return Object(d.jsx)("img",{className:"pg_mm_list_loadding unselectable",width:"50px",src:"/memo/icon/blue_loading.gif",alt:"empty"})}(),Object(d.jsxs)(b.MiddleContent,{children:[Object(d.jsxs)("span",{onClick:function(){Te.setOrUpdateCache(null),x(!0),t(Ie([])),function(){y.apply(this,arguments)}((function(e){setTimeout((function(){Te.setOrUpdateCache(e),t(Ie(Te.getMainCategory())),x(!1)}),500)}))},className:"pg_mm_reload_button",children:["Reload (Caching ",R.getCacheMinutes()," minutes)"]}),Object(d.jsx)(Le,{children:n.map((function(e,t){return Object(d.jsx)(Le.Block,{handleItemClick:_,name:e},t)}))}),Object(d.jsx)("div",{className:"pg_mm_view_popup_block",children:Object(d.jsx)(fe,{onDelete:function(t){return t?o("none"):e.onFailed("Settings")},onEdit:function(t){return e.onEdit(t)},onClose:function(){setTimeout((function(){o("none")}),100),f(null)},source:h,display:i})})]})]})}var Pe=n(115),Me=n.n(Pe),De=n(118);function Fe(e){var t=a.a.useRef(null),n=Object(s.c)((function(e){return e.style})),r=a.a.useRef(""),c=a.a.useRef([]),i=a.a.useState([]),o=Object(u.a)(i,2),l=o[0],p=o[1],h=a.a.useState([]),f=Object(u.a)(h,2),m=f[0],b=f[1],g=a.a.useState(!1),v=Object(u.a)(g,2),y=v[0],_=v[1],k=function(){var e="";return c.current&&c.current.length>0&&(e=c.current.map((function(e){return e.name})).join("")),{category:e,title:r.current.value}};function w(e){return C.apply(this,arguments)}function C(){return C=Object(O.a)(j.a.mark((function e(n){var r,a,i,o,u,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:function(){},"/"===n||!n.endsWith("/")){e.next=20;break}return a=m.map((function(e){return e.name})).join(""),i={name:n,path:a+n,subList:[]},c.current=[].concat(Object(me.a)(c.current),[i]),b(c.current),r(!0),_(!0),t.current=new AbortController,o=t.current.signal,e.next=12,N(o);case 12:if(u=e.sent,!o.aborted){e.next=15;break}return e.abrupt("return");case 15:c.current=u,b(u),_(!1),e.next=21;break;case 20:r();case 21:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function N(e){return E.apply(this,arguments)}function E(){return(E=Object(O.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.current.at(-1),e.next=3,be.getAllCategoryList(n.path,t);case 3:return r=e.sent,(a=Object(me.a)(c.current)).pop(),n=Object(x.a)(Object(x.a)({},n),{},{subList:r}),a.push(n),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.useEffect((function(){function n(e){if(0===e.length)return"";var t="";return e.forEach((function(e){t+=e.name})),t}r.current.value=e.defaultTitle;var a=e.defaultCategory.split("/");a=a.filter((function(e){return""!==e}));var i=[];a.forEach((function(e){e={name:e+"/"},e=Object(x.a)(Object(x.a)({},e),{},{path:n(i)+e.name}),e=Object(x.a)(Object(x.a)({},e),{},{subList:[]}),i.push(e)})),c.current=i,b(i),t.current=new AbortController;var o=t.current.signal;return be.getAllCategoryList("",o).then((function(e){o.aborted||p(Object(me.a)(e))})).catch((function(e){console.log(e)})),function(){t.current.abort()}}),[e]),Object(d.jsxs)("div",{style:{marginBottom:50,height:30},children:[Object(d.jsxs)("div",{className:"pg_mm_path_parent",children:[Object(d.jsx)("span",{className:"pg_mm_selected_path_item",children:"/"}),m.map((function(e,t){return Object(d.jsx)("span",{className:"pg_mm_selected_path_item",children:e.name},t)})),Object(d.jsx)("input",{style:n.borderLine,placeholder:"Press [DEL] to back to previous folder.",ref:r,className:"pg_mm_name_input",onKeyUp:function(t){return function(t){if(46===(t.which||t.keyCode||t.charCode)&&c.current.length>0){var n=Object(me.a)(c.current);n.pop(),c.current=n,b(c.current)}else w(t.target.value,(function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(t.target.value=""),e.onChange(k())}));t.target.focus()}(t)}})]}),Object(d.jsx)("div",{className:"sub_list_redered",style:{marginTop:5,position:"relative"},children:function(){var t=[],n=m.at(-1);if(t=m.length>0?Object(me.a)(n.subList):l,y)return Object(d.jsx)("div",{style:{position:"absolute",top:6,zIndex:-1,color:"#cdcdcd"},children:Object(d.jsx)("img",{height:"20px",src:"https://raw.githubusercontent.com/cuongphuong/memo/master/public/icon/blue_loading.gif",alt:"loadding..."})});if(0===t.length){var a="root/";return n&&n.name&&(a=".../"+n.name),Object(d.jsxs)("div",{style:{position:"absolute",top:6,zIndex:-1,color:"#cdcdcd"},children:["No category from ",a]})}return t.map((function(t,n){return Object(d.jsx)("span",{onClick:function(){return w(t+"/",(function(){e.onChange(k())})),void r.current.focus()},className:"pg_mm_sublist_item",children:t},n)}))}()})]})}n(216);var Ke=S("pg_mm_content_writer"),He={setTitle:function(e){Ke.add("title",e)},getTitle:function(){var e=Ke.get("title");return e||""},setContent:function(e){Ke.add("content",e)},getContent:function(){var e=Ke.get("content");return e||""},releaseCache:function(){Ke.add("title",""),Ke.add("content",""),Ke.add("path",""),Ke.add("isUpdate",!1)},setPath:function(e){Ke.add("path",e)},getPath:function(){var e=Ke.get("path");return e||""},getCategory:function(){var e=Ke.get("path");return e&&e.includes("/")?e.replace(/\/[^/]+.md/gm,""):""},setIsUpdate:function(e){Ke.add("isUpdate",e)},isUpdate:function(){var e=Ke.get("isUpdate");return e||!1}};function We(e){var t=a.a.useRef(null),n=new Me.a,c=Object(r.useState)(""),i=Object(u.a)(c,2),o=i[0],l=i[1],p=Object(r.useState)(!1),h=Object(u.a)(p,2),f=h[0],m=h[1],g=Object(r.useRef)(""),y=Object(r.useRef)(""),_=e.updateAction,k=_.inputPath,w=_.clearPath,N=Object(r.useRef)(!k),E=Object(r.useRef)({title:null,category:null,content:null}),T=Object(s.c)((function(e){return e.style}));function A(){return(A=Object(O.a)(j.a.mark((function e(){var t,n,r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==C.trim(g.current,"")){e.next=3;break}return v.NotificationManager.error("Please input title!!!"),e.abrupt("return");case 3:if(""!==C.trim(y.current,"")){e.next=6;break}return v.NotificationManager.error("Please select category!!!"),e.abrupt("return");case 6:if(!(""===C.trim(o,"")||C.trim(o,"").length<50)){e.next=9;break}return v.NotificationManager.error("Please input content than 50 charactor!!!"),e.abrupt("return");case 9:t=(new Date).getTime(),n=g.current,r=(r="".concat(y.current,"/").concat(C.truncateString(n,25),".md")).replaceAll("//","/"),a="",a+="---\n",a+="id: ".concat(t,"\n"),a+="title: ".concat(g.current,"\n"),a+="category: ".concat(y.current,"\n"),a+="---\n\n",a+=o,c=N.current?"Create file "+y.current+"/"+C.truncateString(n,25):"Update file "+k,R({message:c,content:C.base64Encode(a)},r);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){return L.apply(this,arguments)}function L(){return(L=Object(O.a)(j.a.mark((function e(t,n){var r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m(!0),!N.current){e.next=15;break}return e.prev=2,e.next=5,ae(t,n);case 5:r=e.sent,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),m(!1),v.NotificationManager.error(e.t0+"");case 12:r&&r.commit&&(v.NotificationManager.info(r.commit.html_url,"Commited",5e3,(function(){window.open(r.commit.html_url,"_blank").focus()}),!1),m(!1),He.releaseCache()),e.next=31;break;case 15:if(g.current===E.current.title&&y.current===E.current.category){e.next=25;break}return e.prev=16,e.next=19,ue("main",k,n);case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(16),m(!1),v.NotificationManager.error(e.t1+"");case 25:if(o===E.current.content){e.next=31;break}return a=!0,e.next=29,ce(t,n).catch((function(e){v.NotificationManager.error(e+""),a=!1}));case 29:a&&(v.NotificationManager.info("Updated"),He.releaseCache()),m(!1);case 31:case"end":return e.stop()}}),e,null,[[2,8],[16,21]])})))).apply(this,arguments)}return a.a.useEffect((function(){var n=S("pg_mm_settings"),r=n.has("accessKey")?n.get("accessKey"):"";if(!C.isNullOrEmpty(r)){if(k===He.isUpdate()||N.current)return g.current=He.getTitle(),y.current=He.getCategory(),l(He.getContent()),void(N.current=!He.isUpdate());w(),He.setIsUpdate(!0),He.setPath(k),t.current=new AbortController;var a=t.current.signal;return be.makeContentObject(k,a).then((function(e){e&&(g.current=e.title,y.current=e.category,E.current={title:e.title,category:e.category,originData:e.content},l(e.content))})),function(){t.current.abort()}}e.onFailed("Settings")}),[w,k,e]),Object(d.jsx)("div",{className:"pg_mm_amination",style:{padding:"10px 5px"},children:Object(d.jsxs)(b.MiddleContent,{children:[Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{style:{width:"85%",height:90,float:"left"},children:Object(d.jsx)(Fe,{defaultTitle:g.current,defaultCategory:y.current,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{category:"",title:""};g.current=e.title,y.current=e.category,He.setContent(o),He.setTitle(e.title),C.isNullOrEmpty(e.title)?He.setPath(e.category):He.setPath(e.category+e.title+".md")}})}),Object(d.jsx)("button",{style:Object(x.a)(Object(x.a)({},T.button),{},{width:"9%",height:"40px",float:"right",marginLeft:2}),className:"pg_mm_write_button",onClick:function(){return A.apply(this,arguments)},children:N.current?"Create":"Update"}),C.isNullOrEmpty(o)?"":Object(d.jsx)("button",{style:Object(x.a)(Object(x.a)({},T.button),{},{width:"5%",height:"40px",float:"right",backgroundColor:"#dcdcdc"}),className:"pg_mm_write_button",onClick:function(){He.releaseCache(),l("Loadding..."),setTimeout((function(){g.current="",y.current="",N.current=!0,l("")}),500)},children:"Cancel"})]}),Object(d.jsx)("div",{style:{marginTop:"5px"}}),Object(d.jsx)(De.a,{value:o,onImageUpload:function(e,t){var n=new FileReader;n.onload=function(){var r=(new Date).getTime()+"_"+e.name;ae({message:"Upload file ".concat(r),content:n.result.substr(n.result.indexOf(",")+1)},"Images/".concat(r)).then((function(e){e&&e.content&&e.content.download_url&&t(e.content.download_url)}))},n.readAsDataURL(e)},style:{height:"calc(100vh - 160px",width:"100%"},renderHTML:function(e){return n.render(e)},onChange:function(e){e.html;var t=e.text;l(t),He.setContent(t),He.setTitle(g.current)}}),f?Object(d.jsx)("div",{className:"pg_mm_loadding",children:Object(d.jsx)("img",{height:"45px",src:"https://raw.githubusercontent.com/cuongphuong/memo/master/public/icon/blue_loading.gif",alt:"loadding..."})}):""]})})}n(217),n(218);var Be=n(117);function Ge(){var e=a.a.useRef(null),t=a.a.useRef(null),n=a.a.useRef(null),r=a.a.useRef(null),c=a.a.useRef(null),i=a.a.useRef(null),o=a.a.useRef(null),h=Object(s.c)((function(e){return e.style})),f=a.a.useState(!1),m=Object(u.a)(f,2),g=m[0],x=m[1];function y(){return(y=Object(O.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{R.releaseCache(),v.NotificationManager.info("Success"),setTimeout((function(){window.location.reload()}),1e3)}catch(t){v.NotificationManager.err("err")}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.useEffect((function(){if(e.current.value=R.getUrlRepository(),t.current.value=R.getCacheMinutes(),n.current.value=R.getRequestTimeout(),R.getAccessKey()){var a=R.getAccessKey();r.current.value=a}return c.current.value=R.getUserName(),i.current.value=R.getEmail(),R.getAvatarUrl()&&(o.current.src=R.getAvatarUrl()),function(){}}),[]),Object(d.jsx)("div",{className:"pg_mm_amination",children:Object(d.jsx)(b.MiddleContent,{children:Object(d.jsxs)("div",{style:{padding:10},children:[Object(d.jsx)("h3",{className:"pg_mm_settings_area",children:"Data settings"}),Object(d.jsx)("input",{ref:e,className:"pg_mm_settings_input",placeholder:"URL to repository...",defaultValue:"https://github.com/cuongphuong/memo_data"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"number",ref:t,className:"pg_mm_settings_input",placeholder:"Cache time (ms)...",defaultValue:"10"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"number",ref:n,className:"pg_mm_settings_input",placeholder:"Request timeout (ms)...",defaultValue:"5000"}),Object(d.jsx)("h3",{className:"pg_mm_settings_area",children:"Github account setting"}),Object(d.jsx)("input",{type:g?"text":"password",ref:r,className:"pg_mm_settings_input",placeholder:"Access key (if private repository)..."}),Object(d.jsx)("span",{className:"pg_mm_show_accesskey",children:g?Object(d.jsx)(l.a,{icon:p.b,onClick:function(){return x(!1)}}):Object(d.jsx)(l.a,{icon:p.c,onClick:function(){return x(!0)}})}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{ref:c,className:"pg_mm_settings_input",placeholder:"Username github..."}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{ref:i,className:"pg_mm_settings_input",placeholder:"Email..."}),R.getAvatarUrl()?Object(d.jsxs)(d.Fragment,{children:[" ",Object(d.jsx)("br",{}),Object(d.jsx)("img",{style:h.button,width:50,ref:o,alt:"avatar"})]}):"",Object(d.jsx)("br",{}),Object(d.jsxs)("button",{style:h.button,onClick:function(){!0!==!window.confirm("Do you want to save?")&&(R.setUrlRepository(e.current.value),R.setCacheTimeMinute(t.current.value),R.setRequestTimeout(n.current.value),R.setAccessKey(r.current.value),R.setUserName(c.current.value),R.setEmail(i.current.value),v.NotificationManager.info("Success, reload after 2s."),setTimeout((function(){window.location.reload()}),2e3))},className:"pg_mm_settings_submit",children:[Object(d.jsx)(l.a,{icon:p.g}),Object(d.jsx)("span",{children:"  Save"})]}),R.getAccessKey()?Object(d.jsxs)("button",{style:h.button,onClick:function(){return y.apply(this,arguments)},className:"pg_mm_settings_submit",children:[Object(d.jsx)(l.a,{icon:p.a}),Object(d.jsx)("span",{children:"  Logout"})]}):Object(d.jsxs)("button",{style:h.button,onClick:function(){window.location.href="https://github.com/login/oauth/authorize?client_id=95da9e48d369117d17bb&scope=public_repo"},className:"pg_mm_settings_submit",children:[Object(d.jsx)(l.a,{icon:Be.a}),Object(d.jsx)("span",{children:"  GitHub identity"})]}),Object(d.jsx)("font",{color:"#ddd",children:"(\xa92022 CuongPV10 - v1.0.1)"})]})})})}n(219);function Ve(){var e=Object(s.b)();function t(t){var n=null;switch(t){case"tomato":n={type:"CHANGE_TO_TOMATO_STYLE"},R.setTheme("tomato"),e(n);break;case"blue":n={type:"CHANGE_TO_BLUE_STYLE"},R.setTheme("blue"),e(n);break;case"violet":n={type:"CHANGE_TO_VIOLET_STYLE"},R.setTheme("violet"),e(n)}}return Object(d.jsxs)("div",{className:"pg_mm_style_settings unselectable",children:[Object(d.jsx)("span",{onClick:function(){return t("tomato")}}),Object(d.jsx)("span",{onClick:function(){return t("blue")}}),Object(d.jsx)("span",{onClick:function(){return t("violet")}})]})}function Ye(){var e=a.a.useState("Waiting for check infomation..."),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.search),t=e.get("code");if(C.isNullOrEmpty(t))c(e.get("error_description")),setTimeout((function(){window.location.href="/memo"}),1e3);else{var n=new FormData;n.append("code",t),fetch("https://bdsdb.000webhostapp.com/auth.php/",{method:"POST",headers:{Accept:"application/json"},body:n}).then((function(e){return e.json()})).then(function(){var e=Object(O.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R.setAccessKey(t.access_token),c("Get success token, wait for back to home page..."),fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github.v3+json",Authorization:"Token ".concat(t.access_token)}}).then((function(e){return e.json()})).then((function(e){if(e){var t=e.login,n=e.email,r=e.avatar_url;R.setUserName(t),R.setEmail(n),R.setAvatarUrl(r)}window.location.href="/memo"}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),c("Ohh oh :(((")}))}return function(){}}),[]),Object(d.jsx)("div",{children:n})}function Je(){return Object(d.jsxs)(we.c,{children:[Object(d.jsx)(we.a,{exact:!0,path:"/auth",element:Object(d.jsx)(Ye,{})}),Object(d.jsx)(we.a,{exact:!0,path:"/write",element:Object(d.jsx)(We,{})}),Object(d.jsx)(we.a,{exact:!0,path:"/setting",element:Object(d.jsx)(Ge,{})}),Object(d.jsx)(we.a,{exact:!0,path:"/get/:id",element:Object(d.jsx)(qe,{})}),Object(d.jsx)(we.a,{path:"/",element:Object(d.jsx)(qe,{})})]})}function qe(){var e=R.getAccessKey(),t=e&&e.length>0?["Search","List","Write"]:["Search","List"],n=a.a.useState(t[1]),r=Object(u.a)(n,2),c=r[0],i=r[1],o=a.a.useRef(null),l=a.a.useRef(null),p=Object(s.b)(),h=Object(we.g)().id;function f(e){!function(e){o.current=e}(e),i(t[0])}function m(e){l.current=e,i(t[2])}a.a.useEffect((function(){!function(e){var t=null;switch(e){case"tomato":t={type:"CHANGE_TO_TOMATO_STYLE"},R.setTheme("tomato"),p(t);break;case"blue":t={type:"CHANGE_TO_BLUE_STYLE"},R.setTheme("blue"),p(t);break;case"violet":t={type:"CHANGE_TO_VIOLET_STYLE"},R.setTheme("violet"),p(t)}}(R.getTheme()),C.isNullOrEmpty(h)||i("Search")}),[p,h]);var g={inputPath:l.current,clearPath:function(){l.current=null}};return Object(d.jsxs)(b,{children:[Object(d.jsxs)(b.Header,{children:[Object(d.jsx)(b.Header.Item,{title:"Icon",onClick:function(){return window.location.href="http://github.com/cuongphuong"}},"Icon"),t.map((function(e){return"Setting"!==e?Object(d.jsx)(b.Header.Item,{selected:c,onClick:function(e){return i(e)},title:e},e):""}))]}),Object(d.jsx)(b.FullContent,{children:function(){switch(c){case"Search":return Object(d.jsx)(Ne,{onEdit:m,defaultPost:o.current});case"List":return Object(d.jsx)(Ue,{onEdit:m,onFailed:i});case"Write":return Object(d.jsx)(We,{updateAction:g,actionSubmit:f,onFailed:i});case"Settings":return Object(d.jsx)(Ge,{});default:return Object(d.jsx)(Ne,{})}}()}),Object(d.jsx)(v.NotificationContainer,{}),Object(d.jsx)(Ve,{})]})}var ze=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,237)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},Qe=n(50),Ze={categoryList:[],blockCategoryObj:{}},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CATEGORY_LIST":var n=Object(me.a)(t.payload);return Object(x.a)(Object(x.a)({},e),{},{categoryList:n});case"SET_BLOCK_CATEGORY_OBJECT":var r=Object(x.a)({},t.payload);return Object(x.a)(Object(x.a)({},e),{},{blockCategoryObj:r});default:return e}},Xe={mdContent:null,searchResultList:[],activeId:null,searchKeyWord:""},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SearchReducer/setActiveId":return Object(x.a)(Object(x.a)({},e),{},{activeId:t.payload});case"SearchReducer/setMdContent":return Object(x.a)(Object(x.a)({},e),{},{mdContent:t.payload});case"SearchReducer/setSearchResultList":var n=Object(me.a)(t.payload);return Object(x.a)(Object(x.a)({},e),{},{searchResultList:n});default:return e}},tt={headerMenu:{backgroundColor:"#eec0c6",backgroundImage:"linear-gradient(315deg, #eec0c6 0%, #e58c8a 74%)"},category:{background:"linear-gradient(102deg, rgba(2,0,36,1) 0%, rgba(102,228,210,1) 0%, rgba(255,157,135,0.8434971400669643) 0%, rgba(244,123,58,0.35890330253195024) 100%, rgba(244,124,60,0.5157660476299895) 100%, rgba(80,193,184,1) 100%)"},menuSelected:{background:"#ffd6d6",color:"#333 !important"},leftBackground:{backgroundColor:"#fdfdf9"},borderLine:{border:"solid tomato 1px"},borderLineHover:{border:"solid 1px rgb(252, 139, 119)",boxShadow:"1px 1px 5px 1px rgb(252, 139, 119)"},button:{backgroundColor:"#e58c8a",color:"#fff",marginRight:5},input:{outline:"none",border:"solid tomato 1px"}},nt={headerMenu:{background:"linear-gradient(90deg, rgba(2,0,36,1) 0%, rgba(102,228,210,1) 0%, rgba(80,193,184,1) 98%)"},category:{background:"linear-gradient(102deg, rgba(2,0,36,1) 0%, rgba(84,203,204,0.8519005014115021) 0%, rgba(90,204,195,0.4149257114955357) 100%, rgba(244,123,58,0.35890330253195024) 100%, rgba(244,124,60,0.5157660476299895) 100%, rgba(71,217,196,1) 100%)"},menuSelected:{background:"#b0f4e9",color:"#333 !important"},leftBackground:{backgroundColor:"#f5fafa"},borderLine:{border:"solid #84d9cc 1px"},borderLineHover:{border:"solid 1px #68d4c4",boxShadow:"1px 1px 5px 1px #68d4c4"},button:{backgroundColor:"#3dab9b",color:"#fff",marginRight:5},input:{outline:"none",border:"solid tomato 1px"}},rt={headerMenu:{background:"radial-gradient(circle, rgba(238,174,202,1) 0%, rgba(148,187,233,1) 100%)"},category:{background:"radial-gradient(circle, rgba(238,174,202,1) 0%, rgba(235,174,203,0.5493794930081408) 0%, rgba(148,187,233,0.4989593249409139) 100%)"},menuSelected:{background:"#ebaecb",color:"#333 !important"},leftBackground:{backgroundColor:"#e5f2f0"},borderLine:{border:"solid #ebaecb 1px"},borderLineHover:{border:"solid 1px #ebaecb",boxShadow:"1px 1px 5px 1px #ebaecb"},button:{backgroundColor:"#ebaecb",color:"#fff",marginRight:5},input:{outline:"none",border:"solid tomato 1px"}},at=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_TO_TOMATO_STYLE":return tt;case"CHANGE_TO_BLUE_STYLE":return nt;case"CHANGE_TO_VIOLET_STYLE":return rt;default:return e}},ct=Object(Qe.a)({style:at,listTabData:$e,searchData:et}),it=Object(Qe.b)(ct);i.a.render(Object(d.jsx)(s.a,{store:it,children:Object(d.jsx)(o.a,{children:Object(d.jsx)(Je,{})})}),document.getElementById("root")),ze()}},[[220,1,2]]]);
//# sourceMappingURL=main.62104d7b.chunk.js.map